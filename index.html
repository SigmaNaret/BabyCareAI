<!DOCTYPE html>
<html>
<head>
    <title>Baby Cry Detection</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/audio"></script>
</head>
<body>
    <h1>Baby Cry Detection</h1>
    <p id="result">Loading model...</p>

    <script>
        const URL = "https://sigmanaret.github.io/BabyCareAI/";
        let model, mic, maxPredictions;

        async function init() {
            model = await tmAudio.load(URL + "model.json", URL + "metadata.json");
            maxPredictions = model.getTotalClasses();

            mic = new tmAudio.AudioUtils();
            await mic.setup(); // Request microphone access
            mic.listen(predictionCallback);
        }

        function predictionCallback(predictions) {
            let highest = predictions.reduce((p, c) => (p.probability > c.probability ? p : c));
            document.getElementById("result").innerText = "Detected: " + highest.className;
        }

        window.onload = init;
    </script>
</body>
</html>
