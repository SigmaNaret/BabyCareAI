<!DOCTYPE html>
<html>
<head>
    <title>Baby Cry Detection</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/audio@latest"></script>
</head>
<body>
    <h1>Baby Cry Detection</h1>
    <p id="result">Loading model...</p>
    <button onclick="startListening()">Start Listening</button>

    <script>
        let model, recognizer;
        const URL = "https://sigmanaret.github.io/BabyCareAI/"; // Your GitHub Pages URL

        async function loadModel() {
            console.log("Loading model...");
            model = await tmAudio.load(URL + "model.json", URL + "metadata.json");
            recognizer = new tmAudio.Recognizer(model);
            console.log("Model loaded!");
        }

        async function startListening() {
            if (!model) {
                await loadModel();
            }

            await recognizer.listen(result => {
                let highest = result.reduce((p, c) => (p.probability > c.probability ? p : c));
                document.getElementById("result").innerText = "Detected: " + highest.className;
            });
        }

        window.onload = loadModel;
    </script>
</body>
</html>
